<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="634px" height="431px" viewBox="-0.5 -0.5 634 431" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2022-08-03T07:48:11.719Z&quot; agent=&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36&quot; etag=&quot;-Lmk6YvGInvLcUmGAY1-&quot; version=&quot;20.0.4&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;kgpKYQtTHZ0yAKxKKP6v&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><path d="M 408 292 Q 363 340 403 365 Q 443 390 458.25 397.26" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 462.99 399.52 L 455.17 399.67 L 458.25 397.26 L 458.18 393.35 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="13" y="30" width="120" height="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><path d="M 73 70 L 73 360" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="72.5" y="54.5">ServerOwner</text></g><rect x="69" y="100" width="10" height="260" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><rect x="0" y="140" width="69" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 67px; height: 1px; padding-top: 150px; margin-left: 1px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">notify client<br />&amp;<br />update UI</div></div></div></foreignObject><text x="35" y="154" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">notify clie...</text></switch></g><rect x="193" y="30" width="100" height="40" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><path d="M 243 70 L 243 360" fill="none" stroke="#6c8ebf" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="242.5" y="54.5">StorageFacility</text></g><rect x="238" y="110" width="10" height="250" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><path d="M 408 129 L 256.12 129" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 249.12 129 L 256.12 125.5 L 256.12 132.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="rgb(255, 255, 255)" stroke="none" x="284" y="113" width="90" height="15" stroke-width="0"/><text x="327.5" y="123.5">pull item request</text></g><path d="M 238 151 L 81.24 151" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 89.12 146.5 L 80.12 151 L 89.12 155.5" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="rgb(255, 255, 255)" stroke="none" x="143" y="134" width="33" height="15" stroke-width="0"/><text x="158.07" y="145.5">return</text></g><path d="M 79 110 L 229.88 110" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 236.88 110 L 229.88 113.5 L 229.88 106.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="rgb(255, 255, 255)" stroke="none" x="99" y="94" width="119" height="15" stroke-width="0"/><text x="157.93" y="104.5">push/pull item request</text></g><rect x="364" y="30" width="100" height="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><path d="M 414 70 L 414 360" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="413.5" y="54.5">ServerOther</text></g><rect x="409" y="110" width="10" height="250" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><path d="M 247.9 218.32 L 406.76 218.75" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 398.87 223.23 L 407.88 218.76 L 398.89 214.23" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="rgb(255, 255, 255)" stroke="none" x="312" y="202" width="33" height="15" stroke-width="0"/><text x="327.97" y="213.04">return</text></g><path d="M 419 219 L 577.86 219.43" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 569.97 223.91 L 578.98 219.44 L 569.99 214.91" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="rgb(255, 255, 255)" stroke="none" x="484" y="203" width="33" height="15" stroke-width="0"/><text x="499.07" y="213.72">return</text></g><rect x="533" y="30" width="100" height="40" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><path d="M 583 70 L 583 360" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="12px"><text x="582.5" y="54.5">ClientOther</text></g><rect x="578" y="110" width="10" height="250" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/><path d="M 577.43 129 L 427.12 129" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 420.12 129 L 427.12 125.5 L 427.12 132.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="rgb(255, 255, 255)" stroke="none" x="466" y="113" width="65" height="15" stroke-width="0"/><text x="497.5" y="123.5">buy request</text></g><rect x="419" y="140" width="114" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 112px; height: 1px; padding-top: 150px; margin-left: 420px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><font style="font-size: 8px;">check &amp; cost token</font></div></div></div></foreignObject><text x="476" y="154" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">check &amp; cost token</text></switch></g><rect x="409" y="230" width="120" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 245px; margin-left: 410px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div style="text-align: left;"><span style="font-size: 8px; background-color: initial;">succ: call bag api</span></div><span style="font-size: 8px;"><div style="text-align: left;"><span style="background-color: initial;">fail: rollback token</span></div></span></div></div></div></foreignObject><text x="469" y="249" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">succ: call bag apifa...</text></switch></g><rect x="183" y="0" width="120" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 15px; margin-left: 243px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 8px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">Ensure cosistency</div></div></div></foreignObject><text x="243" y="17" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="8px" text-anchor="middle">Ensure cosistency</text></switch></g><path d="M 238.9 125.5 Q 143 170 163 245 Q 183 320 167.6 363.99" fill="none" stroke="#6c8ebf" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 165.87 368.94 L 164.88 361.18 L 167.6 363.99 L 171.49 363.49 Z" fill="#6c8ebf" stroke="#6c8ebf" stroke-miterlimit="10" pointer-events="all"/><rect x="73" y="370" width="370" height="60" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 362px; height: 1px; padding-top: 360px; margin-left: 78px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left; max-height: 70px; overflow: hidden;"><div style="display: inline-block; font-size: 8px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><h1>Possible situations</h1><div>1. ServerOwner and ServerOther request pulling the same item</div><div>2. Multiple ServerOther request pulling the same item</div></div></div></div></foreignObject><text x="78" y="368" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="8px">Possible situations...</text></switch></g><path d="M 407.86 293.25 L 87.12 293.25" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 80.12 293.25 L 87.12 289.75 L 87.12 296.75 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><g fill="rgb(0, 0, 0)" font-family="Helvetica" text-anchor="middle" font-size="11px"><rect fill="rgb(255, 255, 255)" stroke="none" x="122" y="277" width="243" height="15" stroke-width="0"/><text x="242.79" y="287.75">on succ: send reliable msg &amp; notify add token</text></g><rect x="7" y="284" width="60" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 294px; margin-left: 8px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">token settlement</div></div></div></foreignObject><text x="37" y="298" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">token sett...</text></switch></g><rect x="464" y="400" width="139" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 137px; height: 1px; padding-top: 415px; margin-left: 465px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div style="text-align: left;"><span style="font-size: 8px;">Report to TradeService: record price</span></div></div></div></div></foreignObject><text x="534" y="419" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">Report to TradeService:...</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>